<!DOCTYPE html>
<html lang="hy">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ‘π’•’Ω’ø | AlgoLearn</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      padding: 20px;
      color: #333;
    }

    .quiz-container {
      max-width: 800px;
      margin: 0 auto;
      background: #fff;
      padding: 30px 40px;
      border-radius: 6px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      font-size: 1.6rem;
      margin-bottom: 30px;
    }

    .question-block {
      margin-bottom: 30px;
    }

    h2 {
      font-size: 1.1rem;
      margin-bottom: 12px;
    }

    ul {
      list-style: none;
      padding-left: 0;
    }

    li {
      margin-bottom: 8px;
    }

    input[type="radio"] {
      margin-right: 10px;
    }

    input[type="text"] {
      width: 100%;
      padding: 8px;
      font-size: 1rem;
      border-radius: 4px;
      border: 1px solid #ccc;
      margin-top: 10px;
    }

    .code-snippet {
      background-color: #f9f9f9;
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 10px;
      font-family: Consolas, monospace;
      white-space: pre-wrap;
    }

    .check-btn {
      display: block;
      margin: 30px auto 0;
      padding: 10px 25px;
      background-color: #6f42c1;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
    }

    .check-btn:hover {
      background-color: #5f38a9;
    }

    .result-message {
      margin-top: 10px;
      font-style: italic;
      font-size: 0.95rem;
    }

    .correct-answer {
      color: green;
      font-weight: bold;
    }

    .wrong-answer {
      color: red;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1>‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ‘π’•’Ω’ø</h1>
    <div id="quiz"></div>
    <button class="check-btn" onclick="submitQuiz()">’ç’ø’∏÷Ç’£’•’¨ ’∫’°’ø’°’Ω’≠’°’∂’∂’•÷Ä’®</button>
  </div>

  <script>
    const topic = "QuickSort";
    const API_URL = "https://localhost:7045/api/quiz/submit";
    const COMPLETE_URL = "https://localhost:7045/api/dashboard/complete";

    const questions = [
      {
        id: 1, text: "’à÷Ä’∂ ’ß ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ’¥’´’ª’´’∂ ’™’°’¥’°’∂’°’Ø’°’µ’´’∂ ’¢’°÷Ä’§’∏÷Ç’©’µ’∏÷Ç’∂’®?",
        type: "multiple",
        choices: ["O(n)", "O(n¬≤)", "O(n log n)", "O(1)"]
      },
      {
        id: 2, text: "’à÷Ä’∂ ’ß ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ’æ’°’ø’°’£’∏÷Ç’µ’∂ ’§’•’∫÷Ñ’´ ’¢’°÷Ä’§’∏÷Ç’©’µ’∏÷Ç’∂’®?",
        type: "multiple",
        choices: ["O(n)", "O(n¬≤)", "O(n log n)", "O(1)"]
      },
      {
        id: 3, text: "‘ª’∂’π’∫’•’Ω ’ß ’°’∑’≠’°’ø’∏÷Ç’¥ ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’®?",
        type: "multiple",
        choices: [
          "‘≤’°’™’°’∂’∏÷Ç’¥ ’ß ’¶’°’∂’£’æ’°’Æ’® ’•÷Ä’Ø’∏÷Ç ’Ø’•’Ω’´ ÷á ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥ ’§÷Ä’°’∂÷Ñ ’º’•’Ø’∏÷Ç÷Ä’Ω’´’æ ’Ø’•÷Ä’∫’∏’æ",
          "’Ñ’°’Ω’∂’°’ø’∏÷Ç’¥ ’ß ’¶’°’∂’£’æ’°’Æ’∂ ’°’º’°’∂÷Å÷Ñ’°’µ’´’∂ ’ø’°÷Ä÷Ä’´ ’∑’∏÷Ç÷Ä’ª ÷á ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥ ’•’∂’©’°’¶’°’∂’£’æ’°’Æ’∂’•÷Ä’®",
          "’Ä’°’¥’•’¥’°’ø’∏÷Ç’¥ ’ß ’∞’°÷Ä÷á’°’∂ ’ø’°÷Ä÷Ä’•÷Ä’® ÷á ÷É’∏’≠’°÷Ä’´’∂’∏÷Ç’¥ ’§÷Ä’°’∂÷Ñ ’°’∂’∞÷Ä’°’™’•’∑’ø’∏÷Ç’©’µ’°’∂ ’§’•’∫÷Ñ’∏÷Ç’¥",
          "‘ø’°’º’∏÷Ç÷Å’∏÷Ç’¥ ’ß ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’æ’°’Æ ÷Å’∏÷Ç÷Å’°’Ø ’π’ø’•’Ω’°’Ø’°’æ’∏÷Ä’æ’°’Æ ’ø’°÷Ä÷Ä’•÷Ä’´÷Å"
        ]
      },
      {
        id: 4, text: "’à÷Ä’∂ ’ß ’¨’°’æ’°’£’∏÷Ç’µ’∂ ’®’∂’ø÷Ä’∏÷Ç’©’µ’∏÷Ç’∂’® ’°’º’°’∂÷Å÷Ñ’°’µ’´’∂ ’ø’°÷Ä÷Ä’´ ’∞’°’¥’°÷Ä’ù ’°÷Ä’§’µ’∏÷Ç’∂’°’æ’•’ø’∏÷Ç’©’µ’∏÷Ç’∂’® ’¢’°÷Ä’•’¨’°’æ’•’¨’∏÷Ç ’∞’°’¥’°÷Ä?",
        type: "multiple",
        choices: [
          "‘±’º’°’ª’´’∂ ’ø’°÷Ä÷Ä’®", "’é’•÷Ä’ª’´’∂ ’ø’°÷Ä÷Ä’®", "‘µ÷Ä’•÷Ñ’´ ’¥’•’§’´’°’∂’®", "’ä’°’ø’°’∞’°’Ø’°’∂ ’ø’°÷Ä÷Ä"
        ]
      },
      {
        id: 5, text: "’à÷Ä’∂ ’ß ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ’ø’°÷Ä’°’Æ’°’Ø’°’∂ ’¢’°÷Ä’§’∏÷Ç’©’µ’∏÷Ç’∂’®?",
        type: "multiple",
        choices: ["O(1)", "O(n)", "O(log n)", "O(n¬≤)"]
      },
      {
        id: 6, text: "‘º÷Ä’°÷Å÷Ä’∏÷Ç ’¢’°÷Å’°’Ø’°’µ’∏’≤ ’¥’°’Ω’® ’°’µ’Ω ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ’∫’Ω÷á’§’∏’Ø’∏’§’∏÷Ç’¥‚Ä§",
        code: `Procedure Partition(arr, low, high):
  pivot ‚Üê arr[high]
  i ‚Üê low - 1

  For j from low to high - 1:
    If arr[j] ‚â§ pivot:
      i ‚Üê i + 1
      _______

  Swap arr[i + 1] ‚Üî arr[high]
  Return i + 1`,
        type: "regex",
        answer: "/^swap\s+arr\[\s*i\s*\]\s+(and|‚Üî)\s+arr\[\s*j\s*\];?$/i"
      },
      {
        id: 7, text: "‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’® ’Ø’°’µ’∏÷Ç’∂ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ’°’¨’£’∏÷Ä’´’©’¥ ’ß÷â",
        type: "multiple",
        choices: ["’É’´’∑’ø", "’ç’≠’°’¨"]
      },
      {
        id: 8, text: "‘ª’û’∂’π ’ø’´’∫’´ ’°’¨’£’∏÷Ä’´’©’¥ ’ß ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’®:",
        type: "multiple",
        choices: [
          "‘≤’°’™’°’∂’´÷Ä ÷á ’ø’´÷Ä’´÷Ä (Divide and conquer)",
          "‘±’£’°’∞ (Greedy)",
          "‘¥’´’∂’°’¥’´’Ø ’Æ÷Ä’°’£÷Ä’°’æ’∏÷Ä’∏÷Ç’¥ (Dynamic programming)",
          "’Ä’°’¥’°’ø’°÷Ä’°’Æ ’∏÷Ä’∏’∂’∏÷Ç’¥ (Brute force)"
        ]
      },
      {
        id: 9, text: "’à÷Ä’∂ ’ß ’∞’´’¥’∂’°’Ø’°’∂ ’§’•’∫÷Ñ’® ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’¥’°’∂ ’º’•’Ø’∏÷Ç÷Ä’Ω’´’æ ÷Ü’∏÷Ç’∂’Ø÷Å’´’°’µ’´ ’∞’°’¥’°÷Ä÷â",
        type: "regex",
        answer: /(1\s*’Ø’°’¥\s*0|0\s*’Ø’°’¥\s*1|1|0)/i
      },
      {
        id: 10, text: "‘ª’∂’π’∏÷Ç ’ß ‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’® ’∂’°’≠’®’∂’ø÷Ä’•’¨’´ Merge Sort-’´ ’∂’Ø’°’ø’¥’°’¥’¢ ’£’∏÷Ä’Æ’∂’°’Ø’°’∂’∏÷Ç’¥?",
        type: "multiple",
        choices: [
          "‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’∂ ’°’æ’•’¨’´ ’°÷Ä’§’µ’∏÷Ç’∂’°’æ’•’ø ’ß ’∞’´’∑’∏’≤’∏÷Ç’©’µ’°’∂ ’°’º’∏÷Ç’¥’∏’æ",
          "‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’∂ ’∏÷Ç’∂’´ ’°’æ’•’¨’´ ’¨’°’æ ’™’°’¥’°’∂’°’Ø’°’µ’´’∂ ’¢’°÷Ä’§’∏÷Ç’©’µ’∏÷Ç’∂",
          "‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’® ’¥’´’∑’ø ’ø’°’¨’´’Ω ’ß ’Ø’°’µ’∏÷Ç’∂ ’°÷Ä’§’µ’∏÷Ç’∂÷Ñ’∂’•÷Ä",
          "‘±÷Ä’°’£ ’ø’•’Ω’°’Ø’°’æ’∏÷Ä’∏÷Ç’¥’∂ ’°’æ’•’¨’´ ’∞’•’∑’ø ’ß ’´÷Ä’°’Ø’°’∂’°÷Å’∂’•’¨"
        ]
      }
    ];

    const correct = {
      1: "3", 2: "2", 3: "2", 4: "3", 5: "1",
      6: /^swap\s+arr\[\s*i\s*\]\s+(and|‚Üî)\s+arr\[\s*j\s*\];?$/i, 7: "2", 8: "1", 9: /(1\s*’Ø’°’¥\s*0|0\s*’Ø’°’¥\s*1|1|0)/i, 10: "1"
    };

    const quizEl = document.getElementById("quiz");

    questions.forEach(q => {
      const block = document.createElement("div");
      block.className = "question-block";

      const h2 = document.createElement("h2");
      h2.textContent = `${q.id}. ${q.text}`;
      block.appendChild(h2);

      if (q.code) {
        const codeBox = document.createElement("div");
        codeBox.className = "code-snippet";
        codeBox.textContent = q.code;
        block.appendChild(codeBox);
      }

      if (q.type === "multiple") {
        const ul = document.createElement("ul");
        q.choices.forEach((choice, index) => {
          const li = document.createElement("li");
          li.innerHTML = `<label><input type="radio" name="q${q.id}" value="${index + 1}"> ${choice}</label>`;
          ul.appendChild(li);
        });
        block.appendChild(ul);
      } else {
        const input = document.createElement("input");
        input.type = "text";
        input.placeholder = "’î’∏ ’∫’°’ø’°’Ω’≠’°’∂’®...";
        input.id = `q${q.id}-answer`;
        block.appendChild(input);
      }

      const result = document.createElement("p");
      result.id = `result-q${q.id}`;
      result.className = "result-message";
      block.appendChild(result);

      quizEl.appendChild(block);
    });

    async function submitQuiz() {
      const email = localStorage.getItem("userEmail");
      if (!email) return alert("’Ñ’∏÷Ç’ø÷Ñ ’£’∏÷Ä’Æ’•÷Ñ ’∂’°’≠÷Ñ’°’∂ ’©’•’Ω’ø’® ’∞’°’∂’±’∂’•’¨’®÷â");

      let correctCount = 0;
      const answers = [];

      for (let q of questions) {
        let userAnswer = "";
        const result = document.getElementById(`result-q${q.id}`);

        if (q.type === "multiple") {
          const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
          if (selected) userAnswer = selected.value;
        } else {
          const input = document.getElementById(`q${q.id}-answer`);
          userAnswer = input ? input.value.trim() : "";
        }

        let isCorrect = false;
        if (correct[q.id] instanceof RegExp) {
          isCorrect = correct[q.id].test(userAnswer);
        } else {
          isCorrect = userAnswer === correct[q.id];
        }

        result.textContent = isCorrect ? "‚úîÔ∏è ’É’´’∑’ø ’ß" : "‚ùå ’ç’≠’°’¨ ’ß";
        result.className = "result-message " + (isCorrect ? "correct-answer" : "wrong-answer");

        if (isCorrect) correctCount++;
        answers.push({ questionId: q.id, answer: userAnswer });
      }

      const res = await fetch(API_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ topic, userEmail: email, answers })
      });

      const result = await res.json();
      if (result.canComplete) {
        alert("üéâ ’á’∂’∏÷Ä’∞’°’æ’∏÷Ä’°’∂÷Ñ’∂’•÷Ä, ’§’∏÷Ç÷Ñ ’∞’°’ª’∏’≤’∏÷Ç’©’µ’°’¥’¢ ’°’∂÷Å’°÷Ñ ’©’•’Ω’ø’®÷â");

        await fetch(COMPLETE_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, topicName: topic })
        });
      } else {
        alert("üìö ‘¥’∏÷Ç÷Ñ ’Ω’≠’°’¨ ’•÷Ñ ’∫’°’ø’°’Ω’≠’°’∂’•’¨ ’¥’´ ÷Ñ’°’∂’´ ’∞’°÷Ä÷Å’´÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’æ’•÷Ä’°’∂’°’µ’•’¨ ’∂’µ’∏÷Ç’©’® ÷á ÷É’∏÷Ä’±’•’¨ ’∂’∏÷Ä’´÷Å÷â");
      }
    }
  </script>
</body>
</html>
